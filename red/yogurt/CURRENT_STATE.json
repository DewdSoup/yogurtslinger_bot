{
  "lastUpdated": "2026-01-27",
  "updatedBy": "Cache Validation Session",
  "sessionSummary": "CPMM Layer 1 PROVEN: PumpSwap and RaydiumV4. Cache VALIDATED, Math VALIDATED. Ready for Layer 3.",

  "activeLayer": 2,
  "activeLayerName": "Proving Tools",

  "layerStatus": {
    "layer1_localCacheState": {
      "status": "PROVEN_CPMM",
      "subComponents": {
        "dataPipeline": {
          "description": "gRPC -> Pool Decoders -> Caches",
          "status": "VALIDATED_CPMM",
          "pumpswap": "VALIDATED",
          "raydiumV4": "VALIDATED",
          "raydiumClmm": "NOT_TESTED",
          "meteoraDlmm": "NOT_TESTED",
          "notes": "gRPC delivers 100% accurate state at slot boundaries. See docs/validation/LOCAL_CACHE_VALIDATION.md"
        },
        "mathEngines": {
          "description": "Pool State -> Math Functions -> Swap Output",
          "status": "CPMM_PROVEN",
          "provenVenues": ["PumpSwap", "RaydiumV4"],
          "unprovenVenues": ["RaydiumClmm", "MeteoraDlmm"],
          "notes": "CPMM math proven for PumpSwap (95.98%/100%) and RaydiumV4 (98.26%/100%)."
        }
      },
      "blockers": []
    },
    "layer2_provingTools": {
      "status": "working",
      "notes": "prove-infrastructure.ts supports all venues via --venue flag"
    },
    "layer3_executionPipeline": {
      "status": "not_started",
      "blockers": ["Complete venue validation first"]
    },
    "layer4_predictionLayer": {
      "status": "not_started",
      "blockers": ["Layer 3 must be operational first"]
    }
  },

  "currentVenue": "RaydiumV4",
  "previousVenue": "PumpSwap",

  "venueStatus": {
    "pumpswap": {
      "status": "PROVEN",
      "validationReport": "docs/validation/PUMPSWAP_L2.md",
      "layer3Ready": true,
      "mathType": "CPMM",
      "metrics": {
        "singleSwap": { "passRate": "95.98%", "evaluated": 50027 },
        "multiSwap": { "passRate": "100%", "evaluated": 14712, "method": "k-invariant" }
      },
      "knownIssues": [
        "Token2022 pools use 0 bps fee (8 pools, 0.19% of swaps)",
        "Dust trades have rounding noise (not actionable anyway)"
      ]
    },
    "raydiumV4": {
      "status": "PROVEN",
      "validationReport": "docs/validation/RAYDIUMV4_L2.md",
      "layer3Ready": true,
      "mathType": "CPMM",
      "metrics": {
        "singleSwap": { "passRate": "98.26%", "evaluated": 172 },
        "multiSwap": { "passRate": "100%", "evaluated": 237, "method": "k-invariant" }
      },
      "knownIssues": [
        "Extreme reserve imbalance pools have rounding noise (287bps max, not actionable)"
      ]
    },
    "raydiumClmm": {
      "status": "not_started",
      "mathType": "CLMM (concentrated liquidity)",
      "evidenceCount": 1570,
      "notes": "Different math - tick-based concentrated liquidity",
      "expectedEffort": "HIGH - different math engine"
    },
    "meteoraDlmm": {
      "status": "not_started",
      "mathType": "DLMM (dynamic liquidity)",
      "evidenceCount": 208,
      "notes": "Different math - bin-based dynamic liquidity",
      "expectedEffort": "HIGH - different math engine"
    }
  },

  "nextActions": [
    {
      "priority": "P0",
      "action": "Begin Layer 3 development for CPMM venues",
      "details": "PumpSwap and RaydiumV4 are proven. Build execution pipeline."
    },
    {
      "priority": "P1",
      "action": "Validate RaydiumClmm",
      "details": "Different math - concentrated liquidity with ticks",
      "effort": "HIGH"
    },
    {
      "priority": "P2",
      "action": "Validate MeteoraDlmm",
      "details": "Different math - dynamic liquidity with bins",
      "effort": "HIGH"
    }
  ],

  "handoffInstructions": {
    "forNextAgent": [
      "1. Read MENTAL_MAP.md and LAYERS.md first",
      "2. PumpSwap and RaydiumV4 are PROVEN - Layer 3 ready",
      "3. Next: Build Layer 3 execution pipeline OR validate CLMM/DLMM",
      "4. See docs/validation/ for validation reports"
    ],
    "keyFiles": {
      "provingScript": "scripts/prove-infrastructure.ts",
      "mathEngine": "src/sim/math/constantProduct.ts",
      "raydiumDecoder": "src/decode/programs/raydiumV4.ts",
      "evidenceDb": "data/evidence/capture.db"
    },
    "commonIssues": [
      "Fee structure may differ per venue - check GlobalConfig/AmmConfig",
      "Direction parsing is unreliable - use vault deltas instead",
      "Multi-swap: use k-invariant check, not per-leg validation"
    ]
  },

  "evidence": {
    "database": "data/evidence/capture.db",
    "captureStats": {
      "pumpswap": 84225,
      "raydiumV4": 5782,
      "raydiumClmm": 1570,
      "meteoraDlmm": 208
    }
  },

  "configuration": {
    "pumpswap": {
      "feeModel": "inputFee",
      "feeBps": 25,
      "mathType": "CPMM",
      "status": "PROVEN"
    },
    "raydiumV4": {
      "feeModel": "inputFee",
      "feeBps": 25,
      "mathType": "CPMM",
      "status": "PROVEN"
    }
  }
}
